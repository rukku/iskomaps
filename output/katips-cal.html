<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'/>
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src='./static/underscore-min.js'></script>
<script src='./static/mapbox.js'></script>
<link href='./static/mapbox.css' rel='stylesheet' />
<script type="text/javascript" src="./static/routes.js"></script>
<link href='./static/style.css' rel='stylesheet' />
<style>
.d3-vec { position:absolute; }
path {
  fill: #000;
  fill-opacity: .05;
  stroke: green;
  stroke-opacity: 0.50;
  stroke-width: 15.0px;
  }
</style>
</head>
<body class='section-0'>
<script src='http://d3js.org/d3.v2.min.js'></script>

<div id='pane'><div id='map'></div></div>

<article>

<!--[if lt IE 9]>

Only edit after this

<![endif]-->

    <p><section id='cover' class='cover active'>
    <h1>From Katipunan or Marikina to College of Arts and Letters (CAL)</h1>
    <p>by DiliMaps</p>
    <small class='scroll'>Scroll ▼</small>
  </section></p>
<section id='marikina'>
<h2>Marikina</h2>
<p align='justify'>From Marikina, alight at Aurora Blvd corner Katipunan and walk towards the jeepney terminal under the Katipunan Flyover.
</p>
</section>

<section id='lrt2'>
<h2>LRT2-Katipunan</h2>
<p align='justify'>If you’re coming from the LRT-2 Katipunan Station, take the North Exit on the same side as St. Bridget, opposite PSBA. Walk towards the jeepney terminal under the Katipunan Flyover.
</p>
</section>

<section id='katips'>
<h2>Katipunan Jeepney Terminal</h2>
<p align='justify'>There are two queues calling UP at the terminal. Make sure you ride the jeep which goes inside the campus (the jeep line closer to Ministop). The other jeep line (farther from Ministop) goes to Tandang Sora passing through MWSS and will not go inside UP. To be sure, ask the jeepney barker before boarding.
</p>
</section>

<section id='magsaysay-gate'>
<h2>Magsaysay Ave Gate</h2>
<p align='justify'>The UP-Katipunan jeep enters UP Diliman through the gate opposite MWSS.
</p>
</section>

<section id='gt-toyota'>
<h2>GT-Toyota</h2>
<p align='justify'>Upon entry to UP, you'll see the GT Toyota Building (white) on the left.
</p>
</section>

<section id='romulo'>
<h2>Romulo Hall</h2>
<p align='justify'>The jeep will then pass by Romulo Hall. This is the first intersection the UP-Katipunan jeep encounters once inside UP. The jeep will then turn right at E. Ma. Guerrero St.
</p>
</section>

<section id='ilangilang'>
<h2>Ilang-Ilang Residence Hall</h2>
<p align='justify'> While at E. Ma. Guerrero St., the jeep will pass by Ilang-Ilang Residence Hall before turning left at Laurel St.
</p>
</section>

<section id='chapel'>
<h2>Parish of the Holy Sacrifice</h2>
<p align='justify'>While at Laurel St., the jeep passes by the UP Chapel.
</p>
</section>

<section id='sc'>
<h2>UP Shopping Center</h2>
<p align='justify'> You will also see the UP Shopping Center along Laurel St.
</section>

<section id='kalay'>
<h2>Kalayaan Residence Hall</h2>
<p align='justify'> You'll then see Kalayaan Residence Hall along Roces St. </p>
</section>

<section id='yakal'>
<h2>Yakal Residence Hall</h2>
<p align='justify'> You'll also pass by the side of Yakal Residence Hall. </p>
</section>

<section id='engg'>
<h2>Melchor Hall (Engg)</h2>
<p align='justify'> The jeep will also pass by the side of Melchor Hall (College of Engineering) before turning right at Osmena Ave.</p>
</section>

<section id='carillon'>
<h2>Carillon</h2>
<img src='https://lh5.googleusercontent.com/0vpmOU67QTBC64g9qIDGbJIGD6xfGpUw8bAUJqo4rbH2cywfa6zbBzHQeFJQLhWYwXZ1xscBPi2XNYDN4xwtJhAsQDuwLHThYXuLsa6v7CEgOAhp--7UwPnR'>
<p>The jeep will also pass by notable UP landmarks such as the <i>UP Carillon</i>.</p>
</section>

<section id='oble'>
<h2>Oblation Plaza</h2>
<img src='https://lh5.googleusercontent.com/Yz5J2JH1WOC3rDIvLnC-0kHeuK0F7Q8I7KXhRWGsx79Ev4f_xbZFySb49DLnGdWV-52yjPxcneu3kx2XpNdRy_e7hNYH-41eLrYwb7Q5HBn8saCd2RuffH4d'>
<p align='justify'>The jeep will proceed along the Academic Oval and pass by the <i>Oblation Plaza</i>.</p>
</section>

<section id='vargas'>
<h2>Vargas Museum</h2>
<img src='https://lh3.googleusercontent.com/RR2Zn75jAHCg1n62J32i_zhJ4aNVA8x38bhClXbHk3_okI5LXiN04pqO_lCGve3agAQhDhSiBQQCibffDNJO4nnulKvz1AvCwBeqDcqrbZpHJ1ODzl-RpzbY'>
<p align='justify'>From the Oblation it will pass by the <i>Vargas Museum</i>. Prepare to get off as the jeep is now very close to Palma Hall.</p>
</section>

<section id='fc'>
<h2>Faculty Center (FC)</h2>
<img src='https://lh5.googleusercontent.com/t_vjv4y-qyiDaJjHBxTpikavsADYACZNs_uLK3_oIS53g9EeP9uexJCJdflxiqQegZrpgA-W0eduFy_F19tBTK2NzBeNRFx-Q2R9IO2evqSOD8tCKcbH-M0e'>
<br><br>
<p align='justify'>Right next to the Vargas Museum is the Faculty Center (FC).</p>
</section>

<section id='fc-stop'>
<h2>Faculty Center (FC) Waiting Shed</h2>
<p align='justify'>Step off from the jeep at the <b>Faculty Center</b> (FC) waiting shed beside Vargas Museum.
  <br><br>
Walk back in the direction of Vargas Museum then make a left turn as you reach the <b>service road</b> beside FC.</p>
</section>

<section id='cal'>
<h2>College of Arts and Letters (CAL)</h2>
<img src='https://lh6.googleusercontent.com/7O8KqiUUafzyctqoYlZ7pUqo0gVjctpwHc1l7kwHK8kajm3XCzNFdubfIOBiVOlgF7rOMPKZLwL6z_tUuaF0_GB9G3BgXs390wcoGTLqHBtiIYNd_skxWstZ'>
<p align='justify'>Finally, head toward the nude female statue, Magdangal. Looming behind her is the <b>College of Arts and Letters</b> building.</p>
</section>

<section id='che'>
<h2>If you’re running late and there’s too much traffic:</h2>
<p align="justify">The Faculty Center jeepney stop is one of the last stops of the UP-Katipunan jeep inside UP before the jeep goes back to Katipunan again.
<br><br>
If you do not have time to spare (10-15 minutes before call time), alight at the <b>foot bridge along Katipunan Avenue</b> connecting the old UP Integrated School compound to the main campus. There is a lesser known <b>pedestrian entrance here marked by a guard house</b>. You are essentially at the side of UP College of Home Economics (Alonso Hall).
    <br><br>
    Cross the foot bridge, go through the pedestrian entrance, and make a run for it. You only need to run straight toward Palma Hall, turn right at Roces Street and <b>turn left at the parking space (near Landbank)</b> going to the College of Arts and Letters. Aja!</p>
  </section>

<!--[if lt IE 9]>

Do not edit beyond this

<![endif]-->

</article>

<script>
//For the D3 layer
function d3layer() {
    var f = {}, bounds, feature, collection;
    var div = d3.select(document.body)
        .append("div")
        .attr('class', 'd3-vec'),
        svg = div.append('svg'),
        g = svg.append("g");

    f.parent = div.node();

    f.project = function(x) {
      var point = f.map.locationPoint({ lat: x[1], lon: x[0] });
      return [point.x, point.y];
    };

    var first = true;
    f.draw = function() {
      first && svg.attr("width", f.map.dimensions.x)
          .attr("height", f.map.dimensions.y)
          .style("margin-left", "0px")
          .style("margin-top", "0px") && (first = false);

      path = d3.geo.path().projection(f.project);
      feature.attr("d", path);
    };

    f.data = function(x) {
        collection = x;
        bounds = d3.geo.bounds(collection);
        feature = g.selectAll("path")
            .data(collection.features)
            .enter().append("path");
        return f;
    };

    f.extent = function() {
        return new MM.Extent(
            new MM.Location(bounds[0][1], bounds[0][0]),
            new MM.Location(bounds[1][1], bounds[1][0]));
    };
    return f;
}

var tiles = mapbox.layer().tilejson({
  tiles: [ "http://a.tiles.mapbox.com/v3/examples.map-liczq28b/{z}/{x}/{y}.png" ]
});
var spots = mapbox.markers.layer()
  // Load up markers from geojson data.
  .features(geojson)
  // Define a new factory function. Takes geojson input and returns a
  // DOM element that represents the point.
  .factory(function(f) {
    var el = document.createElement('div');
    el.className = 'spot spot-' + f.properties.id;
    return el;
  });
// Creates the map with tile and marker layers and
// no input handlers (mouse drag, scrollwheel, etc).
var map = mapbox.map('map', [spots], null, []);

//Add baselayer
map.addLayer(new MM.TemplatedLayer('http://c.tiles.mapbox.com/v3/examples.map-szwdot65/{Z}/{X}/{Y}.png'));
map.ui.attribution.add()
    .content('Map tiles by <a href="http://stamen.com">Mapbox</a>, under' +
    ' <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>.' +
    ' Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.');
// Add Jeep Route
var jeep = d3layer().data(green);
//map.addLayer(jeep);


map.addLayer(spots);

// Array of story section elements.
var sections = document.getElementsByTagName('section');

// Array of marker elements with order matching section elements.
var markers = _(sections).map(function(section) {
  return _(spots.markers()).find(function(m) {
    return m.data.properties.id === section.id;
  });
});

// Helper to set the active section.
var setActive = function(index, ease) {
  // Set active class on sections, markers.
  _(sections).each(function(s) { s.className = s.className.replace(' active', '') });
  _(markers).each(function(m) { m.element.className = m.element.className.replace(' active', '') });
  sections[index].className += ' active';
  markers[index].element.className += ' active';

  // Set a body class for the active section.
  document.body.className = 'section-' + index;

  // Ease map to active marker.
  if (!ease) {
    map.centerzoom(markers[index].location, markers[index].data.properties.zoom||20);
  } else {
    map.ease.location(markers[index].location).zoom(markers[index].data.properties.zoom||20).optimal(0.5, 2);
  }

  return true;
};

// Bind to scroll events to find the active section.
window.onscroll = _(function() {
  // IE 8
  if (window.pageYOffset === undefined) {
    var y = document.documentElement.scrollTop;
    var h = document.documentElement.clientHeight;
  } else {
    var y = window.pageYOffset;
    var h = window.innerHeight;
  }

  // If scrolled to the very top of the page set the first section active.
  if (y === 0) return setActive(0, true);

  // Otherwise, conditionally determine the extent to which page must be
  // scrolled for each section. The first section that matches the current
  // scroll position wins and exits the loop early.
  var memo = 0;
  var buffer = (h * 0.3333);
  var active = _(sections).any(function(el, index) {
    memo += el.offsetHeight;
    return y < (memo-buffer) ? setActive(index, true) : false;
  });

  // If no section was set active the user has scrolled past the last section.
  // Set the last section active.
  if (!active) setActive(sections.length - 1, true);
}).debounce(10);


// Set map to first section.
setActive(0, false);


//var myLayer = L.geoJson(ikot).addTo(map);
</script>

</body>
</html>